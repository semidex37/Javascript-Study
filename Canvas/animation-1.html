<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>animation-1</title>
    <script src="../src/js/lib/jquery-3.3.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            console.log("document.ready");
            var canvas = document.getElementById("canvas1");
            var context = canvas.getContext("2d");

            var x = 0;
            var y = 0;
            var w = 50;
            var h = 50;
            var count = 0;
            var xDirection = 1;
            var yDirection = 1;


            var render = function() {
                if(x > 30 || x < -30 || y > 30 || y < -30) {
                    count++;
                    // xDirection *= -1;
                    if(count % 8 == 0) {
                        count = 0;
                        xDirection *= -1;
                    }else if(count % 6 == 0) {
                        yDirection *= -1;
                    }else if(count % 4 == 0) {
                        xDirection *= -1;
                    }else if(count % 2 == 0) {
                        yDirection *= -1;
                    }
                }

                x += xDirection;
                y += yDirection;

                console.log(x, y, count, xDirection, yDirection);

                // console.log (_x, _y, w, h);
                // context.clearRect(0,0,500,500);
                canvas.width = canvas.width;
                context.setTransform(1, 0, 0.1, 1, 0, 0);
                context.translate(250, 250);


                context.beginPath();
                context.rect(x, y, w, h);
                context.closePath();
                context.fillStyle = "red";
                context.fill();

                context.translate(x, y);

                context.beginPath();
                context.rect(x, y, w, h);
                context.closePath();
                context.fillStyle = "blue";
                context.fill();

                context.translate(x, y);

                context.beginPath();
                context.rect(x, y, w, h);
                context.closePath();
                context.fillStyle = "green";
                context.fill();

                requestAnimationFrame(render);
            };

            render();
        });
    </script>
</head>
<body>
    <div style="position: relative; height: 500px">
        <canvas id="canvas1" width="500" height="500" style="border: solid 1px black; position: absolute"></canvas>
    </div>

    <style type="text/css">

    </style>
</body>
</html>